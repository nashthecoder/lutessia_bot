# üß† Lutessia AI ‚Äì Trading Decision System

## 1. Initialization

Define all business parameters:

- Signal weights (`w_lstm`, `w_atr`, `w_guru`, `w_lutessia`)
- Score thresholds for buy, sell, and neutral zone
- Total fees (`frais_total`) to consider
- Minimum required gain for profitability (`gain_minimal`)

## ‚öôÔ∏è 2. Basic Functions

### `normalize()`
Converts a value in the range [min, max] to [0, 1], to allow uniform weighting.

### `calcul_score(lstm, atr, guru, lutessia)`
Normalizes the signals:

- **LSTM**: direct probability ‚Üí [0, 1]
- **ATR**: % value ‚Üí [0, 1] (with expected max, e.g., 10%)
- **Guru**: directional signal -1 to +1 ‚Üí [0, 1]
- **Lutessia**: AI score -1 to +1 ‚Üí [0, 1]

Each signal is weighted by its business importance.

Returns a final global score that quantifies the probability of a winning trade.

## üß† 3. Central Role of Lutessia

Lutessia is the final arbitration AI.  
It acts as a strategic judge, independently of the global score:

- If the score suggests a **buy**, Lutessia must be **positive** (`lutessia_score > 0`)
- If the score suggests a **sell**, Lutessia must be **negative** (`lutessia_score < 0`)
- If contradiction ‚Üí **NO ACTION**

## üìä 4. Input Data

Inject current market data:

- `lstm_pred`: bullish probability
- `atr_percent`: volatility (in %)
- `guru_signal`: external signal -1 / 0 / +1
- `lutessia_score`: strategic AI decision
- `expected_gain`: estimated gross gain (%)

## üîç 5. Calculations and Decisions

Calculate `score_final` via `calcul_score(...)`

Apply `decision(score, expected_gain)`:

- **BUY**: `score > buy_threshold` AND `expected_gain > gain_minimal` AND `lutessia_score > 0`
- **SELL**: `score < sell_threshold` AND `lutessia_score < 0`
- **NO TRADE**: score between thresholds  
Otherwise: **WAIT**

## üßæ Log Samples

### ‚úÖ Buy Accepted by AI

üß† IA Score SOL-USDC | LSTM: 0.6840 | GRU: 0.0921 | ATR: 0.0345 | GURU: 1.00 | LUTE: 0.75 | Final: 0.7150 (‚â•0.600)
üìä Analysis SOL-USDC | Expected TP = 85.2000, Fees = 0.5100, Net profit estimate = 2.33%
‚úÖ Trade allowed (net profit 2.33% ‚â• threshold 1.50%)
üìà Series used: series_2_large_caps | TP = 2.50%, SL = 1.20%
üí∞ Final buy amount: 20.0000 USDC
‚úÖ MARKET or LIMIT order successfully sent for SOL-USDC

shell
Copier
Modifier

### ‚ùå Buy Rejected by AI (Insufficient score or LUTE ‚â§ 0)

üß† IA Score SOL-USDC | LSTM: 0.6840 | GRU: 0.0921 | ATR: 0.0345 | GURU: 1.00 | LUTE: 0.25 | Final: 0.4150 (<0.600)
üìä Analysis SOL-USDC | Expected TP = 85.2000, Fees = 0.5100, Net profit estimate = 2.33%
‚õî Trade rejected by AI (score too low or LUTE ‚â§ 0), no order sent

shell
Copier
Modifier

### üí∏ Sell Accepted (TP or SL reached or LUTE < 0)

üß† IA Score SOL-USDC | LSTM: 0.1420 | GRU: -0.0520 | ATR: 0.0270 | GURU: -1.00 | LUTE: -0.65 | Final: 0.1850 (<0.200)# üß† Lutessia AI ‚Äì Trading Decision System

## 1. Initialization

Define all business parameters:

- Signal weights (`w_lstm`, `w_atr`, `w_guru`, `w_lutessia`)
- Score thresholds for buy, sell, and neutral zone
- Total fees (`frais_total`) to consider
- Minimum required gain for profitability (`gain_minimal`)

## ‚öôÔ∏è 2. Basic Functions

### `normalize()`
Converts a value in the range [min, max] to [0, 1], to allow uniform weighting.

### `calcul_score(lstm, atr, guru, lutessia)`
Normalizes the signals:

- **LSTM**: direct probability ‚Üí [0, 1]
- **ATR**: % value ‚Üí [0, 1] (with expected max, e.g., 10%)
- **Guru**: directional signal -1 to +1 ‚Üí [0, 1]
- **Lutessia**: AI score -1 to +1 ‚Üí [0, 1]

Each signal is weighted by its business importance.

Returns a final global score that quantifies the probability of a winning trade.

## üß† 3. Central Role of Lutessia

Lutessia is the final arbitration AI.  
It acts as a strategic judge, independently of the global score:

- If the score suggests a **buy**, Lutessia must be **positive** (`lutessia_score > 0`)
- If the score suggests a **sell**, Lutessia must be **negative** (`lutessia_score < 0`)
- If contradiction ‚Üí **NO ACTION**

## üìä 4. Input Data

Inject current market data:

- `lstm_pred`: bullish probability
- `atr_percent`: volatility (in %)
- `guru_signal`: external signal -1 / 0 / +1
- `lutessia_score`: strategic AI decision
- `expected_gain`: estimated gross gain (%)

## üîç 5. Calculations and Decisions

Calculate `score_final` via `calcul_score(...)`

Apply `decision(score, expected_gain)`:

- **BUY**: `score > buy_threshold` AND `expected_gain > gain_minimal` AND `lutessia_score > 0`
- **SELL**: `score < sell_threshold` AND `lutessia_score < 0`
- **NO TRADE**: score between thresholds  
Otherwise: **WAIT**

## üßæ Log Samples

### ‚úÖ Buy Accepted by AI

üß† IA Score SOL-USDC | LSTM: 0.6840 | GRU: 0.0921 | ATR: 0.0345 | GURU: 1.00 | LUTE: 0.75 | Final: 0.7150 (‚â•0.600)
üìä Analysis SOL-USDC | Expected TP = 85.2000, Fees = 0.5100, Net profit estimate = 2.33%
‚úÖ Trade allowed (net profit 2.33% ‚â• threshold 1.50%)
üìà Series used: series_2_large_caps | TP = 2.50%, SL = 1.20%
üí∞ Final buy amount: 20.0000 USDC
‚úÖ MARKET or LIMIT order successfully sent for SOL-USDC

shell
Copier
Modifier

### ‚ùå Buy Rejected by AI (Insufficient score or LUTE ‚â§ 0)

üß† IA Score SOL-USDC | LSTM: 0.6840 | GRU: 0.0921 | ATR: 0.0345 | GURU: 1.00 | LUTE: 0.25 | Final: 0.4150 (<0.600)
üìä Analysis SOL-USDC | Expected TP = 85.2000, Fees = 0.5100, Net profit estimate = 2.33%
‚õî Trade rejected by AI (score too low or LUTE ‚â§ 0), no order sent

shell
Copier
Modifier

### üí∏ Sell Accepted (TP or SL reached or LUTE < 0)

üß† IA Score SOL-USDC | LSTM: 0.1420 | GRU: -0.0520 | ATR: 0.0270 | GURU: -1.00 | LUTE: -0.65 | Final: 0.1850 (<0.200)
üìä Analysis SOL-USDC | Current price = 86.9000 | Fees = 1.0200 | Net gain = 3.10%
üí∏ Sale executed | Take Profit reached or confirmed AI signal
üìà Series used: series_2_large_caps | TP = 2.50%, SL = 1.20%
‚úÖ MARKET order successfully sent for SOL-USDC

shell
Copier
Modifier

### ‚õî Sell Rejected by AI (LUTE ‚â• 0 or non-critical loss)

üß† IA Score SOL-USDC | LSTM: 0.3120 | GRU: -0.0405 | ATR: 0.0220 | GURU: -1.00 | LUTE: 0.20 | Final: 0.1950 (<0.200)
üìä Analysis SOL-USDC | Current price = 84.7000 | Fees = 0.4500 | Estimated net loss = -0.80%
‚õî Sale rejected: AI contradiction (LUTE ‚â• 0) or loss considered recoverable (SL not reached)

markdown
Copier
Modifier

## üìã Decision Matrix

| **Type**        | **Condition**                                                        | **Summary Log**                                                                              | **AI Status** | **Action**                     |
|-----------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------|---------------|---------------------------------|
| ‚úÖ Buy Accepted | `score_final ‚â• 0.600` AND `LUTE > 0` AND `profit ‚â• 1.5%`              | High score, favorable AI, validated profitability                                            | LUTE > 0      | MARKET or LIMIT order executed |
| ‚ùå Buy Rejected | `score_final < 0.600` OR `LUTE ‚â§ 0`                                   | Score too low or unfavorable AI, even if profit is sufficient                               | LUTE ‚â§ 0      | No order sent                  |
| üí∏ Sell Accepted| `score_final < 0.200` AND `LUTE < 0` OR TP/SL reached                 | Validated sell signal or exit objectives reached (Take Profit / Stop Loss)                 | LUTE < 0      | Sale executed                  |
| ‚õî Sell Rejected| `score_final < 0.200` BUT `LUTE ‚â• 0` OR loss < SL threshold           | AI judges the sale premature or loss recoverable (e.g., SL = -1.5% not hit, loss at -0.8%) | LUTE ‚â• 0      | Sale blocked, position held    |
üìä Analysis SOL-USDC | Current price = 86.9000 | Fees = 1.0200 | Net gain = 3.10%
üí∏ Sale executed | Take Profit reached or confirmed AI signal
üìà Series used: series_2_large_caps | TP = 2.50%, SL = 1.20%
‚úÖ MARKET order successfully sent for SOL-USDC

shell
Copier
Modifier

### ‚õî Sell Rejected by AI (LUTE ‚â• 0 or non-critical loss)

üß† IA Score SOL-USDC | LSTM: 0.3120 | GRU: -0.0405 | ATR: 0.0220 | GURU: -1.00 | LUTE: 0.20 | Final: 0.1950 (<0.200)
üìä Analysis SOL-USDC | Current price = 84.7000 | Fees = 0.4500 | Estimated net loss = -0.80%
‚õî Sale rejected: AI contradiction (LUTE ‚â• 0) or loss considered recoverable (SL not reached)

markdown
Copier
Modifier

## üìã Decision Matrix

| **Type**        | **Condition**                                                        | **Summary Log**                                                                              | **AI Status** | **Action**                     |
|-----------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------|---------------|---------------------------------|
| ‚úÖ Buy Accepted | `score_final ‚â• 0.600` AND `LUTE > 0` AND `profit ‚â• 1.5%`              | High score, favorable AI, validated profitability                                            | LUTE > 0      | MARKET or LIMIT order executed |
| ‚ùå Buy Rejected | `score_final < 0.600` OR `LUTE ‚â§ 0`                                   | Score too low or unfavorable AI, even if profit is sufficient                               | LUTE ‚â§ 0      | No order sent                  |
| üí∏ Sell Accepted| `score_final < 0.200` AND `LUTE < 0` OR TP/SL reached                 | Validated sell signal or exit objectives reached (Take Profit / Stop Loss)                 | LUTE < 0      | Sale executed                  |
| ‚õî Sell Rejected| `score_final < 0.200` BUT `LUTE ‚â• 0` OR loss < SL threshold           | AI judges the sale premature or loss recoverable (e.g., SL = -1.5% not hit, loss at -0.8%) | LUTE ‚â• 0      | Sale blocked, position held    |
